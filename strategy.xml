<?xml version="1.0" encoding="UTF-8"?>
<GeminiPropChallengeAssistant>
  <Meta>
    <Version>6.2-Context-Aware</Version>
    <Objective>Pass Prop Challenge using Weighted Probabilistic Alpha and Dynamic Confidence Scaling.</Objective>
    <Pairs>GBPUSD, XAUUSD</Pairs>
    <Constraints>
      <MaxDailyDrawdownPct>3.8</MaxDailyDrawdownPct>
      <MaxDailyLossStopTrades>3</MaxDailyLossStopTrades>
      <TradingSessions>London, NewYork</TradingSessions>
    </Constraints>
  </Meta>

  <AI_Reasoning_Instructions>
    <AlphaInterpretation>
      <!-- The Decoder Ring for Python's Math Scores -->
      <StructureScore weight="35%">
        <Meaning>Proximity to Liquidity (Swings/Support/Resistance)</Meaning>
        <Thresholds>
          <Score range="0.8-1.0">CRITICAL: Price is sweeping a key level (Stop Hunt). High Prob Reversal.</Score>
          <Score range="0.5-0.79">WARNING: Price is testing a level.</Score>
          <Score range="0.0-0.49">NOISE: Mid-range. Ignore.</Score>
        </Thresholds>
      </StructureScore>

      <ReversionScore weight="30%">
        <Meaning>Elasticity (Distance from Mean)</Meaning>
        <Thresholds>
          <Score range="0.8-1.0">EXTREME: Rubber band stretched. Snap-back imminent.</Score>
          <Score range="0.0-0.79">NORMAL: Room to move.</Score>
        </Thresholds>
      </ReversionScore>

      <VolatilityScore weight="20%">
        <Meaning>Market Heartbeat</Meaning>
        <Thresholds>
          <Score range="0.0-0.3">DEAD: Spread > Opportunity. Stay out.</Score>
          <Score range="0.31-1.0">ALIVE: Trade enabled.</Score>
        </Thresholds>
      </VolatilityScore>

      <MomentumScore weight="15%">
        <Meaning>Trend Velocity</Meaning>
        <Thresholds>
          <Score range="0.0-0.2">CHOP: No clear direction.</Score>
          <Score range="0.8-1.0">VELOCITY: Fast move. Do not fade unless StructureScore is 1.0.</Score>
        </Thresholds>
      </MomentumScore>
    </AlphaInterpretation>

    <SessionContext>
      <!-- Time-of-Day Personality for the AI -->
      <London>
        <Characteristics>High Liquidity, "Judas Swings" (False moves), Breakouts.</Characteristics>
        <Strategy>Prioritize StructureScore > 0.9 (Sweeps) in the first 2 hours.</Strategy>
      </London>
      <NewYork>
        <Characteristics>Trend Continuation, High Volume, News Reversals.</Characteristics>
        <Strategy>Prioritize MomentumScore > 0.8. Follow the flow.</Strategy>
      </NewYork>
    </SessionContext>

    <ConfidenceTiers>
      <!-- Dynamic Risk Scaling Instructions -->
      <Tier level="GRADE_A">
        <Condition>Total Alpha > 0.8 AND StructureScore > 0.85</Condition>
        <Action>Execute Aggressively. Risk: 0.5%.</Action>
      </Tier>
      <Tier level="GRADE_B">
        <Condition>Total Alpha > 0.6 AND MomentumScore > 0.7</Condition>
        <Action>Execute Cautiously. Risk: 0.25%.</Action>
      </Tier>
      <Tier level="GRADE_C">
        <Condition>Total Alpha &lt; 0.6</Condition>
        <Action>HOLD. Not enough edge.</Action>
      </Tier>
    </ConfidenceTiers>

    <DecisionMatrix>
      <Setup type="LiquiditySweep">
        <Condition>StructureScore > 0.85 AND StructureType == 'SUPPORT_LOW'</Condition>
        <Action>BUY (Expect Reversal up)</Action>
      </Setup>
      
      <Setup type="LiquiditySweep">
        <Condition>StructureScore > 0.85 AND StructureType == 'RESISTANCE_HIGH'</Condition>
        <Action>SELL (Expect Reversal down)</Action>
      </Setup>
      
      <Setup type="TrendPullback">
        <Condition>MomentumScore > 0.7 AND ReversionScore &lt; 0.4</Condition>
        <Action>JOIN TREND (Price is moving but not over-extended)</Action>
      </Setup>
    </DecisionMatrix>
  </AI_Reasoning_Instructions>

  <EntryRules>
    <SpreadLimit>
      <Normal>0.20% of ATR</Normal>
      <Gold_XAU>0.30% of ATR</Gold_XAU>
    </SpreadLimit>

    <RiskManagement>
      <BaseRiskPerTradePct>0.50</BaseRiskPerTradePct>
      <StopLoss>
        <Rule>If StructureScore is High: Place SL beyond the Sweep Wick (Tight).</Rule>
        <Rule>If MomentumScore is High: Place SL below EMA50 (Wide).</Rule>
      </StopLoss>
    </RiskManagement>
  </EntryRules>
</GeminiPropChallengeAssistant>