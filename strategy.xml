<?xml version="1.0" encoding="UTF-8"?>
<GeminiPropChallengeAssistant>
  <Meta>
    <Version>5.3-GoldOptimized</Version>
    <Objective>Pass Prop Challenge using AI-Driven Liquidity Analysis and Price Action.</Objective>
    <Pairs>GBPUSD, XAUUSD</Pairs>
    <Constraints>
      <MaxDailyDrawdownPct>3.8</MaxDailyDrawdownPct>
      <TradingSessions>London, NewYork</TradingSessions>
    </Constraints>
  </Meta>

  <AI_Reasoning_Instructions>
    <!-- Instructions for interpreting Python's forensic data -->
    <FakeoutDetection>
      <BearishTrap>
        IF price pierced 'recent_swing_high' (> 0 pips)
        AND 'failed_to_close_above_high' is TRUE
        AND 'upper_wick_strength' > 0.5
        THEN -> High Probability Sell (Liquidity Sweep).
      </BearishTrap>
      <BullishTrap>
        IF price pierced 'recent_swing_low' (> 0 pips)
        AND 'failed_to_close_below_low' is TRUE
        AND 'lower_wick_strength' > 0.5
        THEN -> High Probability Buy (Liquidity Sweep).
      </BullishTrap>
    </FakeoutDetection>
  </AI_Reasoning_Instructions>

  <MarketRegimes>
    <Regime type="TRENDING">
      <Condition>ADX > 25 AND EMA_Alignment == True</Condition>
      <Strategy>BreakoutRetest, TrendScalp</Strategy>
    </Regime>
    <Regime type="RANGING">
      <Condition>ADX &lt; 20 AND Price_Inside_Donchian == True</Condition>
      <Strategy>FadeSupportResistance</Strategy>
    </Regime>
  </MarketRegimes>

  <EntryRules>
    <!-- NEW: Commodity-Specific Spread Rules -->
    <SpreadLimit>
      <Normal>2.5</Normal> 
      <Gold_XAU>4.5</Gold_XAU> <!-- Special Allowance for XAUUSD/GOLD volatility -->
    </SpreadLimit>

    <PriceAction>
      <Pattern name="Pinbar">Wick is 2/3rds of total candle length (Rejection)</Pattern>
      <Pattern name="Engulfing">Body completely covers previous candle (Momentum)</Pattern>
      <Pattern name="InsideBarBreak">Breakout from low volatility compression</Pattern>
    </PriceAction>

    <ScalpSetup>
      <!-- M15 Execution for quick moves -->
      <Buy>Trend is UP + Price bounces off EMA50 + Bullish Pinbar/Engulfing</Buy>
      <Sell>Trend is DOWN + Price rejects EMA50 + Bearish Pinbar/Engulfing</Sell>
    </ScalpSetup>

    <BreakoutSetup>
      <!-- Structural Breaks -->
      <Buy>Price closes above recent Swing High + Retest + Bullish PA</Buy>
      <Sell>Price closes below recent Swing Low + Retest + Bearish PA</Sell>
    </BreakoutSetup>
  </EntryRules>

  <RiskManagement>
    <BaseRiskPerTrade>0.5%</BaseRiskPerTrade>
    <StopLoss>
      <Scalp>Below Signal Candle Low</Scalp>
      <Swing>Below recent Swing Low Structure</Swing>
    </StopLoss>
  </RiskManagement>
</GeminiPropChallengeAssistant>